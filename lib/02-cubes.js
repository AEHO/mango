webpackJsonp([1],{0:function(t,e,i){"use strict";var a=i(1)["default"],r=(i(43),i(65)),o=a(r),n=i(2),s=a(n),u=i(33),l=a(u),c=i(66),f=a(c),d=i(67),h=a(d),_=i(68),m=a(_),v=i(69),p=a(v),g=i(57),y=a(g),M=i(70),w=a(M),P=i(62),x=a(P),b=i(74),A=a(b),j=new s["default"](document.querySelector("canvas")),S=new A["default"],O=new x["default"](S),N=new o["default"](S,2);S.position=[0,0,-.4],S.at=[0,0,N.radius];var R=new l["default"](j._gl,{material:new w["default"](j._gl,{ambient:[1,0,0,1],diffuse:[1,0,0,1],specular:[1,0,0,1]}),geometry:new h["default"]}),k=new l["default"](j._gl,{material:new y["default"](j._gl,[1,1,1]),geometry:new p["default"](5),drawMode:"LINES"}),F=new l["default"](j._gl,{material:new y["default"](j._gl,[1,1,1]),geometry:new m["default"](N.radius),drawMode:"POINTS"}),V=new l["default"](j._gl,{geometry:new f["default"]([0,0,0],S.at),material:new y["default"](j._gl,[1,0,0]),drawMode:"LINES"});R.scale=[.2,.2,.2],k.rotate([1,0,0],Math.PI/2),k.position=[0,0,.5],F.position=[0,0,0],j.camera=S,O.submit(R,k,F,V),j.bindControls({keys:!0,mouse:!0,interceptRightClick:!1,onMouseUp:N.stop.bind(N),onMouseDown:N.start.bind(N),onMouseMove:function(t){t.buttons&&(N.move(t),V.rotation=N.rotation,R.rotation=N.rotation)}}),function I(){window.requestAnimationFrame(I),j.update(),j.isKeyActive(65)&&S.incrementPosition(.05),j.isKeyActive(68)&&S.incrementPosition(-.05),j.isKeyActive(87)&&S.incrementPosition(0,0,.05),j.isKeyActive(83)&&S.incrementPosition(0,0,-.05),O.flush()}()},65:function(t,e,i){"use strict";var a=i(3)["default"],r=i(8)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=i(43),n=function(){function t(e){var i=void 0===arguments[1]?1:arguments[1],a=void 0===arguments[2]?!1:arguments[2];r(this,t),this.radius=i,this._camera=e,this._strict=a,this._currRot=o.quat.create(),this._lastRot=o.quat.create(),this._rot=o.quat.create(),this._startVec=o.vec3.create(),this._endVec=o.vec3.create()}return a(t,[{key:"start",value:function(t){this._toSphere(this._startVec,t),this._currRot=o.quat.clone(this._lastRot)}},{key:"stop",value:function(t){this._strict?o.quat.multiply(this._lastRot,this._lastRot,this._currRot):o.quat.multiply(this._lastRot,this._currRot,this._lastRot)}},{key:"move",value:function(t){this._toSphere(this._endVec,t),o.quat.rotationTo(this._currRot,this._startVec,this._endVec),this._strict?o.quat.multiply(this._rot,this._lastRot,this._currRot):o.quat.multiply(this._rot,this._currRot,this._lastRot)}},{key:"_toSphere",value:function(t,e){t[0]=2*e.offsetX/this._camera._width-1,t[1]=1-2*e.offsetY/this._camera._height;var i=t[0]*t[0]+t[1]*t[1],a=this.radius*this.radius;i>a?t[2]=0:t[2]=Math.sqrt(a-i),o.vec3.normalize(t,t)}},{key:"rotation",get:function(){return this._rot}}]),t}();e["default"]=n,t.exports=e["default"]},66:function(t,e,i){"use strict";var a=i(8)["default"],r=i(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=i(55),n=(r(o),function s(t,e){a(this,s),this.coords=new Float32Array([t[0],t[1],t[2],e[0],e[1],e[2]]),this.indices=new Uint16Array([0,1])});e["default"]=n,t.exports=e["default"]},67:function(t,e,i){"use strict";var a=i(8)["default"],r=i(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=i(55),n=(r(o),function s(){void 0===arguments[0]?1:arguments[0],void 0===arguments[1]?1:arguments[1],void 0===arguments[2]?1:arguments[2],void 0===arguments[3]?!0:arguments[3];a(this,s),this.coords=new Float32Array([.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5]),this.normals=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1]),this.indices=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23])});e["default"]=n,t.exports=e["default"]},68:function(t,e,i){"use strict";var a=i(3)["default"],r=i(8)["default"],o=i(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var n=i(55),s=(o(n),function(){function t(){var e=void 0===arguments[0]?1:arguments[0],i=void 0===arguments[1]?Math.PI/80:arguments[1];r(this,t);var a=Math.floor(2*Math.PI/i)*Math.floor(Math.PI/i)*3;this.coords=new Float32Array(a),this.indices=new Uint16Array(a/3);for(var o=0,n=0,s=0;s<=2*Math.PI;s+=i)for(var u=0;u<=Math.PI;u+=i)this.coords[n]=e*Math.cos(u)*Math.sin(s),this.coords[n+1]=e*Math.sin(s)*Math.sin(u),this.coords[n+2]=e*Math.cos(s),this.indices[o]=o++,n+=3}return a(t,[{key:"normals",get:function(){throw new Error("No normals specified yet")}}]),t}());e["default"]=s,t.exports=e["default"]},69:function(t,e,i){"use strict";var a=i(8)["default"],r=i(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var o=i(55),n=(r(o),function s(){var t=void 0===arguments[0]?2:arguments[0];a(this,s);var e=8*t+4;this.coords=new Float32Array(3*e),this.indices=new Uint16Array(e);for(var i=0,r=0,o=-t;t>=o;o++)this.coords[i]=o,this.coords[i+1]=-t,this.coords[i+2]=0,this.indices[r]=r++,this.coords[i+3]=o,this.coords[i+4]=t,this.coords[i+5]=0,this.indices[r]=r++,this.coords[i+6]=-t,this.coords[i+7]=o,this.coords[i+8]=0,this.indices[r]=r++,this.coords[i+9]=t,this.coords[i+10]=o,this.coords[i+11]=0,this.indices[r]=r++,i+=12});e["default"]=n,t.exports=e["default"]},70:function(t,e,i){"use strict";var a=i(3)["default"],r=i(8)["default"],o=i(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var n=i(71),s=o(n),u=function(){function t(e,i){r(this,t),i||(i={ambient:[.5,.5,.5,1],diffuse:[.5,.5,.5,1],specular:[.5,.5,.5,1]}),this.shader=new s["default"](e,i),this.componentCount=6}return a(t,[{key:"prepare",value:function(t){this.shader.prepare(t)}}]),t}();e["default"]=u,t.exports=e["default"]},71:function(t,e,i){"use strict";var a=i(34)["default"],r=i(37)["default"],o=i(3)["default"],n=i(8)["default"],s=i(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(72),l=s(u),c=i(73),f=s(c),d=i(61),h=s(d),_=6,m=(new Float32Array).BYTES_PER_ELEMENT,v=m*_,p={vertex:0,normal:m*_/2},g=function(t){function e(t,i){n(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this._OFFSETS=p,this._STRIDE_SIZE=v,this._STRIDE=_,this._gl=t,this.ambient=new Float32Array(i.ambient),this.diffuse=new Float32Array(i.diffuse),this.specular=new Float32Array(i.specular),this.init(l["default"],f["default"],["a_Position","a_Normal","u_matAmb","u_matDif","u_matSpec","u_NormalMatrix","u_ModelMatrix","u_ProjectionViewMatrix"])}return a(e,t),o(e,[{key:"prepare",value:function(t){for(var e=2*t.coords.length,i=new Float32Array(e),a=0,r=0;e>r;r+=_)i[r]=t.coords[a],i[r+1]=t.coords[a+1],i[r+2]=t.coords[a+2],i[r+3]=t.normals[a],i[r+4]=t.normals[a+1],i[r+5]=t.normals[a+2],a+=3;return i}},{key:"prepareUniforms",value:function(t,e){this.setUniformMatrix4fv("u_ModelMatrix",t.modelMatrix),this.setUniformMatrix4fv("u_NormalMatrix",t.normalMatrix),this.setUniformMatrix4fv("u_ProjectionViewMatrix",e.projectionViewMatrix),this.setUniform4fv("u_matAmb",this.ambient),this.setUniform4fv("u_matDif",this.diffuse),this.setUniform4fv("u_matSpec",this.specular)}},{key:"prepareLocations",value:function(t){this._gl.vertexAttribPointer(this._locations.a_Position,t.componentCount/2,this._gl.FLOAT,!1,v,p.vertex),this._gl.vertexAttribPointer(this._locations.a_Normal,t.componentCount/2,this._gl.FLOAT,!1,v,p.normal),this._gl.enableVertexAttribArray(this._locations.a_Position),this._gl.enableVertexAttribArray(this._locations.a_Normal)}}]),e}(h["default"]);e["default"]=g,t.exports=e["default"]},72:function(t,e){t.exports="attribute vec4 a_Position;\nattribute vec4 a_Normal;\n\nuniform mat4 u_NormalMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_ProjectionViewMatrix;\n\nvarying vec4 v_Normal;\nvarying vec4 v_Position;\n\nvoid main ()\n{\n  v_Position = -vec4(u_ModelMatrix * a_Position);\n  v_Normal = normalize(vec4(u_NormalMatrix * a_Normal));\n\n  gl_Position = u_ProjectionViewMatrix * u_ModelMatrix * a_Position;\n  gl_PointSize = 4.0;\n}\n\n"},73:function(t,e){t.exports="/* Phong per-frag shader */\n\nprecision mediump float;\n\nuniform vec4 u_matAmb;\nuniform vec4 u_matDif;\nuniform vec4 u_matSpec;\n\nconst float shininess = 100.0;\n\nvec4 lightPosition = vec4(0.0, 2.0, -3.0, 0.0);\nvec4 lightAmbient = vec4(0.2, 0.2, 0.2, 1.0);\nvec4 lightDiffuse = vec4(0.8, 0.8, 0.8, 1.0);\nvec4 lightSpecular = vec4(0.8, 0.9, 0.8, 1.0);\n\nvarying vec4 v_Normal;\nvarying vec4 v_Position;\n\nvoid main ()\n{\n  vec4 L = normalize(lightPosition - v_Position);\n  vec4 V = normalize(v_Position);\n  vec4 H = normalize(L + V);\n\n  float Kd = max(dot(v_Normal,L), 0.0);\n  float Ks = pow(max(dot(v_Normal,H), 0.0), shininess);\n\n  vec4 diffuse = Kd * lightDiffuse * u_matDif;\n  vec4 specular = Ks * lightSpecular * u_matSpec;\n  vec4 ambient = lightAmbient * u_matAmb;\n\n  gl_FragColor = vec4(ambient + diffuse + specular);\n}\n\n"},74:function(t,e,i){"use strict";var a=i(34)["default"],r=i(37)["default"],o=i(3)["default"],n=i(8)["default"],s=i(1)["default"];Object.defineProperty(e,"__esModule",{value:!0});var u=i(64),l=s(u),c=i(43),f=function(t){return t*Math.PI/180},d=function(t){function e(){var t=void 0===arguments[0]?70:arguments[0],i=void 0===arguments[1]?.1:arguments[1],a=void 0===arguments[2]?1e3:arguments[2];void 0===arguments[3]?1:arguments[3];n(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this._fov=t,this._near=i,this._far=a,this._ar=1}return a(e,t),o(e,[{key:"_updateProjectionViewMatrix",value:function(){c.mat4.lookAt(this._viewMatrix,this._position,this._at,this._up),c.mat4.perspective(this._projectionMatrix,f(this._fov),this._ar,this._near,this._far),c.mat4.multiply(this._projectionViewMatrix,this._projectionMatrix,this._viewMatrix)}},{key:"fov",get:function(){return this._fov},set:function(t){this._fov=t,this._dirty=!0,this._dirtyInverse=!0}}]),e}(l["default"]);e["default"]=d,t.exports=e["default"]}});